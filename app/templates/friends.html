{% extends "base.html" %}

{% block body_class %}friends-page{% endblock %}

{% block content %}
<div class="friends-container">
    <h1>Friends</h1>

    <div class="friends-container-nav">
        {% if view == 'friends' %}
            <strong>Friends</strong> |
        {% else %}
            <a href="{{ url_for('main.friends', view='friends') }}">Friends</a> |
        {% endif %}

        {% if view == 'outgoing' %}
            <strong>Outgoing</strong> |
        {% else %}
            <a href="{{ url_for('main.friends', view='outgoing') }}">Outgoing</a> |
        {% endif %}

        {% if view == 'incoming' %}
            <strong>Incoming</strong>
        {% else %}
            <a href="{{ url_for('main.friends', view='incoming') }}">Incoming</a>
        {% endif %}
    </div>

    <form action="" method="post" novalidate class="search-form" autocomplete="off">
        {{ form.hidden_tag() }}
        <p class="field">
            {{ form.search_user(size=32, placeholder=form.search_user.label.text) }}
        </p>
        <p class="actions">{{ form.submit() }}</p>
    </form>

    {% if users %}
        <ul class="results-container" data-url="{{ url_for('main.friends') }}" data-view="{{ view }}" data-query="{{ query or '' }}" data-has-more="{{ 'true' if has_more else 'false' }}">
        {% for user in users %}
            {% include '_user_item.html' %}
        {% endfor %}
        </ul>
    {% else %}
        <p>No users found.</p>
    {% endif %}
</div>
{% endblock %}